(window["webpackJsonpmusic-sorting-app"]=window["webpackJsonpmusic-sorting-app"]||[]).push([[0],[,,,,,,function(e,t,a){},,,,function(e,t,a){e.exports=a.p+"static/media/alfonso-scarpa-e12EkMYv44U-unsplash.36ffb61c.jpg"},function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),n=a(9),r=a.n(n),c=a(1),i=a(2),o=a(4),m=a(3),u=a(5),h=a(10),f=a.n(h);a(6);function d(e){return e.disp?l.a.createElement("div",{className:"line"}," "):l.a.createElement("div",{className:"invisible-line"}," ")}function E(){window.location.reload(!0)}var p=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={hovered:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleOnMouseOver",value:function(){this.setState({hovered:!0})}},{key:"handleOnMouseOut",value:function(){this.setState({hovered:!1})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"go"},l.a.createElement("button",{className:"rec",onClick:E,onMouseOver:function(){return e.handleOnMouseOver()},onMouseOut:function(){return e.handleOnMouseOut()}},this.props.label),l.a.createElement(d,{disp:this.state.hovered})))}}]),t}(l.a.Component),k=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"sidenav"},l.a.createElement("img",{className:"goo",width:"100%",height:"100%",src:f.a,alt:""}),l.a.createElement("div",{className:"side-nav-buttons"},l.a.createElement(p,{label:""}),l.a.createElement(p,{label:"Log Out"})),l.a.createElement("p",{className:"caption1"},"Photo taken by Alfonso Scarpa"))}}]),t}(l.a.Component),g=(a(16),function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"welcome"},l.a.createElement("h1",{className:"title"},"Discover your mood."),l.a.createElement("p",{className:"sub-heading-text"},"We often listen to music because we feel a certain mood, and sometimes listening to music can evoke feelings in us. Sign in to discover which of your songs are the most danceable, energetic, and happy. This website pulls data about valence, energy and danceability of your most recent top 10 most listened-to songs. This website uses Spotify API to fetch data. "))}}]),t}(l.a.Component)),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={category:null,tracks:a.props.tracks_,valence_tracks:null,original_tracks:a.props.tracks,danceability_tracks:null,energy_tracks:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handle_category_request",value:function(e,t){if("original"===t)this.setState({category:t,tracks:this.state.original_tracks});else if("valence"===t&&this.state.valence_tracks)this.setState({category:t,tracks:this.state.valence_tracks});else if("danceability"===t&&this.state.danceability_tracks)console.log(this.state.danceability_tracks),this.setState({category:t,tracks:this.state.danceability_tracks});else if("energy"===t&&this.state.energy_tracks)this.setState({category:t,tracks:this.state.energy_tracks});else{var a=[],s={},l=this.props.features_.slice();this.heapsort(l,l.length,t);for(var n=0;n<25;n++)s[this.state.tracks[n].id]=this.state.tracks[n];for(var r=0;r<25;r++)a.push(s[l[r].id]);"valence"===t?this.setState({category:t,tracks:a,valence_tracks:a}):"danceability"===t?this.setState({category:t,tracks:a,danceability_tracks:a}):"energy"===t?this.setState({category:t,tracks:a,energy_tracks:a}):"original"===t&&this.setState({category:t,tracks:a,original_tracks:e})}}},{key:"heapsort",value:function(e,t,a){for(var s=Math.floor(t/2-1);s>=0;s--)this.heapify(e,t,s,a);for(var l=t-1;l>=0;l--)this.swap(e,0,l),this.heapify(e,l,0,a);return e}},{key:"swap",value:function(e,t,a){var s=e[t];e[t]=e[a],e[a]=s}},{key:"heapify",value:function(e,t,a,s){var l=a,n=2*a+1,r=2*a+2;n<t&&e[n][s]<e[l][s]&&(l=n),r<t&&e[r][s]<e[l][s]&&(l=r),l!==a&&(this.swap(e,l,a),this.heapify(e,t,l,s))}},{key:"handleClick",value:function(e){this.handle_category_request(this.state.tracks,e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h1",{className:"title2"},"Discover your mood."),l.a.createElement("div",{className:"btn-group toolbar",role:"group","aria-label":"Basic example"},l.a.createElement("button",{onClick:function(){return e.handleClick("valence")},type:"button",className:"valence"===this.state.category?"btn btn-warning":"btn btn-outline-warning","data-toggle":"button"},"valence"),l.a.createElement("button",{onClick:function(){return e.handleClick("danceability")},type:"button",className:"danceability"===this.state.category?"btn btn-warning":"btn btn-outline-warning"},"danceability"),l.a.createElement("button",{onClick:function(){return e.handleClick("energy")},type:"button",className:"energy"===this.state.category?"btn btn-warning":"btn btn-outline-warning"},"energy")),l.a.createElement("table",{className:"text-white tb"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"1"),l.a.createElement("td",null,l.a.createElement("img",{className:"float-left ml-2 ",src:this.state.tracks[0].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[0].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[0].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"2"),l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[1].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[1].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[1].artists[0].name," "))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"3"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[2].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[2].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[2].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"4"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[3].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[3].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[3].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"5"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[4].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[4].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[4].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"6"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[5].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[5].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[5].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"7"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[6].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[6].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[6].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"8"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[7].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[7].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[7].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"9"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[8].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[8].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[8].artists[0].name," ")))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"10"),l.a.createElement("div",null,l.a.createElement("img",{className:"float-left ml-2",src:this.state.tracks[9].album.images[2].url,alt:""}),l.a.createElement("div",{className:"float-left ml-4 pt-2"},l.a.createElement("h6",null,l.a.createElement("strong",null,this.state.tracks[9].name)),l.a.createElement("p",{className:"artist-text "},this.state.tracks[9].artists[0].name," ")))))))}}]),t}(l.a.Component),v=a(7),y=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var N=y,w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={error:null,tracks:null,token:null,features:null,loaded_features:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=N.access_token;e&&(this.setState({token:e}),this.getTracks(e))}},{key:"getTracks",value:function(e){var t,a=this;v.ajax({method:"GET",url:"https://api.spotify.com/v1/me/top/tracks?limit=25&time_range=short_term",headers:{Authorization:"Bearer "+e},success:function(e){t=e.items.slice(),a.setState({tracks:t})}})}},{key:"getFeatures",value:function(){for(var e,t=this,a="",s=0;s<25;s++)a+=this.state.tracks[s].id,24!==s&&(a+=",");var l="https://api.spotify.com/v1/audio-features?ids="+a;v.ajax({method:"GET",url:l,headers:{Authorization:"Bearer "+this.state.token},success:function(a){e=a.audio_features.slice(),t.setState({loaded_features:!0,features:e})}})}},{key:"render",value:function(){return this.state.tracks&&!this.state.loaded_features&&this.getFeatures(),l.a.createElement("div",null,this.state.tracks&&l.a.createElement(k,null),!this.state.token&&l.a.createElement("div",null,l.a.createElement(g,{className:"welcome"}),l.a.createElement("a",{className:"btn btn-outline-success btn-lg btn-login-link",role:"button",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("8aabf0573c944d8e997334df6c782355","&redirect_uri=").concat("https://hugo-pinetree.github.io/spotify-music-ranker","&scope=").concat("user-top-read","&response_type=token&show_dialog=true")},"Log In")),this.state.tracks&&this.state.features&&l.a.createElement(b,{tracks_:this.state.tracks,features_:this.state.features,className:"collection"}))}}]),t}(l.a.Component);r.a.render(l.a.createElement(w,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.d46d5f07.chunk.js.map